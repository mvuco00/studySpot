import React, { Component } from "react";
import classes from "./todo.css";
import Task from "./Task/task";
import { v4 as uuidv4 } from "uuid";

class ToDo extends Component {
  state = {
    todoList: ["Kupit mlijeko", "Napisat domaći"],
    userInput: "",
  };
  handleInput = (e) => {
    this.setState({
      userInput: e.target.value,
    });
  };

  handleSubmit = (e) => {
    e.preventDefault();
    if (this.state.userInput != "") {
      this.setState({
        todoList: [this.state.userInput, ...this.state.todoList],
        userInput: "",
      });
    }
  };

  handleDelete = (index) => {
    //filter uzima listu (item i index) i vraća novu listu koja odgovara uvjetu
    //vrati listu elemenata čiji index nije kao index kojeg smo provjeravali
    const filteredList = this.state.todoList.filter((item, todoIndex) => {
      return todoIndex !== index;
    });
    this.setState({ todoList: filteredList });
  };
  render() {
    return (
      <div className={classes.todo}>
        <div className={classes.todosvg}>
          <svg
            width="210"
            height="67"
            viewBox="0 0 210 67"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M53.875 1.25L50.2188 28.7188L44.8281 8.65625L30.4375 10.2969L32.3594 57.125L43.9844 63.0781L6.53125 66.6406L20.1719 56.75L22.5625 10.7656L7.70312 10.2031L1.9375 27.2656L0.109375 2.04688L53.875 1.25ZM55.7031 41.4688C55.7031 37.9688 56.25 34.7344 57.3438 31.7656C58.4688 28.7656 60.0156 26.1719 61.9844 23.9844C63.9844 21.7969 66.3438 20.0938 69.0625 18.875C71.8125 17.625 74.8125 17 78.0625 17C81.2188 17 84.1094 17.5938 86.7344 18.7812C89.3594 19.9375 91.6406 21.5781 93.5781 23.7031C95.5156 25.8281 97.0625 28.375 98.2188 31.3438C99.375 34.3125 100.062 37.5938 100.281 41.1875C100.5 45.0312 100.094 48.5156 99.0625 51.6406C98.0625 54.7344 96.5781 57.375 94.6094 59.5625C92.6406 61.7188 90.2812 63.3906 87.5312 64.5781C84.8125 65.7656 81.8594 66.3594 78.6719 66.3594C75.6094 66.3594 72.6875 65.8125 69.9062 64.7188C67.1562 63.5938 64.7188 61.9688 62.5938 59.8438C60.5 57.7188 58.8281 55.125 57.5781 52.0625C56.3281 48.9688 55.7031 45.4375 55.7031 41.4688ZM67.2344 42.2656C67.2344 45.0156 67.625 47.5 68.4062 49.7188C69.1875 51.9375 70.2344 53.8281 71.5469 55.3906C72.8594 56.9219 74.375 58.1094 76.0938 58.9531C77.8125 59.7969 79.625 60.2188 81.5312 60.2188C83.4375 60.2188 85.2188 59.8125 86.875 59C88.5312 58.1562 89.9688 56.9844 91.1875 55.4844C92.4062 53.9531 93.3594 52.125 94.0469 50C94.7344 47.875 95.0781 45.5156 95.0781 42.9219C95.0781 40.3594 94.7344 37.9531 94.0469 35.7031C93.3594 33.4219 92.3906 31.4375 91.1406 29.75C89.9219 28.0625 88.4688 26.7344 86.7812 25.7656C85.0938 24.7969 83.25 24.3125 81.25 24.3125C79.4688 24.3125 77.7344 24.7188 76.0469 25.5312C74.3906 26.3438 72.9062 27.5312 71.5938 29.0938C70.2812 30.625 69.2188 32.5 68.4062 34.7188C67.625 36.9375 67.2344 39.4531 67.2344 42.2656ZM115.844 65.375C110.938 65.375 105.953 65 100.891 64.25L113.641 58.3906L117.953 9.96875L103.469 3.45312C106.5 2.76562 109.578 2.23438 112.703 1.85938C115.828 1.45312 118.703 1.15625 121.328 0.96875C124.359 0.75 127.312 0.625 130.188 0.59375C132.312 0.59375 134.5 0.84375 136.75 1.34375C139.031 1.84375 141.25 2.64063 143.406 3.73438C145.562 4.79688 147.594 6.17188 149.5 7.85938C151.406 9.54688 153.062 11.5625 154.469 13.9062C155.906 16.25 157.047 18.9531 157.891 22.0156C158.734 25.0469 159.156 28.4688 159.156 32.2812C159.156 36.5 158.547 40.25 157.328 43.5312C156.109 46.8125 154.438 49.6719 152.312 52.1094C150.219 54.5469 147.766 56.625 144.953 58.3438C142.141 60.0312 139.125 61.3906 135.906 62.4219C132.688 63.4531 129.359 64.2031 125.922 64.6719C122.516 65.1406 119.156 65.375 115.844 65.375ZM148.234 30.4531C148.234 28.8594 148.109 27.1562 147.859 25.3438C147.641 23.5312 147.25 21.7344 146.688 19.9531C146.125 18.1719 145.375 16.4688 144.438 14.8438C143.5 13.1875 142.328 11.7344 140.922 10.4844C139.547 9.23437 137.906 8.23438 136 7.48438C134.094 6.73438 131.891 6.35938 129.391 6.35938C128.078 6.35938 126.703 6.45312 125.266 6.64062V59.1406C129.516 58.5469 133.094 57.4375 136 55.8125C138.938 54.1875 141.312 52.1406 143.125 49.6719C144.938 47.1719 146.234 44.3125 147.016 41.0938C147.828 37.8438 148.234 34.2969 148.234 30.4531ZM164.547 41.4688C164.547 37.9688 165.094 34.7344 166.188 31.7656C167.312 28.7656 168.859 26.1719 170.828 23.9844C172.828 21.7969 175.188 20.0938 177.906 18.875C180.656 17.625 183.656 17 186.906 17C190.062 17 192.953 17.5938 195.578 18.7812C198.203 19.9375 200.484 21.5781 202.422 23.7031C204.359 25.8281 205.906 28.375 207.062 31.3438C208.219 34.3125 208.906 37.5938 209.125 41.1875C209.344 45.0312 208.938 48.5156 207.906 51.6406C206.906 54.7344 205.422 57.375 203.453 59.5625C201.484 61.7188 199.125 63.3906 196.375 64.5781C193.656 65.7656 190.703 66.3594 187.516 66.3594C184.453 66.3594 181.531 65.8125 178.75 64.7188C176 63.5938 173.562 61.9688 171.438 59.8438C169.344 57.7188 167.672 55.125 166.422 52.0625C165.172 48.9688 164.547 45.4375 164.547 41.4688ZM176.078 42.2656C176.078 45.0156 176.469 47.5 177.25 49.7188C178.031 51.9375 179.078 53.8281 180.391 55.3906C181.703 56.9219 183.219 58.1094 184.938 58.9531C186.656 59.7969 188.469 60.2188 190.375 60.2188C192.281 60.2188 194.062 59.8125 195.719 59C197.375 58.1562 198.812 56.9844 200.031 55.4844C201.25 53.9531 202.203 52.125 202.891 50C203.578 47.875 203.922 45.5156 203.922 42.9219C203.922 40.3594 203.578 37.9531 202.891 35.7031C202.203 33.4219 201.234 31.4375 199.984 29.75C198.766 28.0625 197.312 26.7344 195.625 25.7656C193.938 24.7969 192.094 24.3125 190.094 24.3125C188.312 24.3125 186.578 24.7188 184.891 25.5312C183.234 26.3438 181.75 27.5312 180.438 29.0938C179.125 30.625 178.062 32.5 177.25 34.7188C176.469 36.9375 176.078 39.4531 176.078 42.2656Z"
              fill="#E7D428"
            />
          </svg>
        </div>
        <div className={classes.taskForm}>
          <form autoComplete="off" onSubmit={this.handleSubmit}>
            <input
              className={classes.addTask}
              type="text"
              placeholder="ToDo..."
              value={this.state.userInput}
              onChange={this.handleInput}
            />
            <input type="submit" value="DODAJ" className={classes.addBtn} />
          </form>
        </div>

        <div className={classes.alltasks}>
          {this.state.todoList.map((item, index) => {
            return (
              <Task
                item={item}
                key={uuidv4()}
                index={index}
                handleDelete={this.handleDelete}
              />
            );
          })}
        </div>
      </div>
    );
  }
}
export default ToDo;
